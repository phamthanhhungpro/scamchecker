<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../assets/favicon.png" type="image/x-icon">
    <title>Kiểm tra - Tố cáo lừa đảo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/styles.css">
    <link rel="stylesheet" href="detail.css">
    <link rel="stylesheet" href="../assets/font-awesome/css/all.css" />
    <link rel="stylesheet" href="../assets/fancybox.css" />
    <style>
        .logo {
            font-size: 24px;
            font-weight: bold;
        }

        .card-title {
            font-size: 20px;
        }

        .card-header {
            background-color: #f8f9fa;
        }

        .card-body ul {
            padding-left: 0;
        }

        .card-body ul li {
            margin-bottom: 10px;
        }

        .scammer-body:before {
            content: '';
            position: absolute;
            top: calc(50% + 50px);
            left: 50%;
            width: 200px;
            height: 92px;
            background: url(../assets/scam-alert.webp) no-repeat center center;
            display: inline-block;
            -ms-transform: translate(-50%, -50%);
            transform: translate(-50%, -50%);
            -moz-transform: translate(-50%, -50%);
            -webkit-transform: translate(-50%, -50%);
            z-index: 100;
            opacity: 0.45;
            pointer-events: none;
        }

        .information-item_image {
            width: calc(20% - 8px);
            -ms-flex-negative: 0;
            flex-shrink: 0;
            -webkit-transition: var(--transition-default);
            -o-transition: var(--transition-default);
            transition: var(--transition-default);
        }

        .hstack {
            display: flex;
            flex-direction: row;
            align-items: center;
            align-self: stretch;
        }

        .ratio-1x1 {
            --bs-aspect-ratio: 100%;
        }

        .ratio {
            position: relative;
            width: 100%;
        }

        .ratio::before {
            display: block;
            padding-top: var(--bs-aspect-ratio);
            content: "";
        }

        .ratio>img {
            -o-object-fit: cover;
            object-fit: cover;
        }

        .ratio>* {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .img-fluid {
            max-width: 100%;
        }

        .information-item_images {
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-align: center;
            -ms-flex-align: center;
            align-items: center;
            -ms-flex-wrap: wrap;
            flex-wrap: wrap;
            gap: 10px;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="border-bottom mb-3">
        <div class="container d-flex justify-content-between align-items-center py-2">
            <div class="logo">
                <a class="link-logo" href="/">
                    <img src="../assets/logo.png" alt="CheckScam">
                    <span>TỰ TIN GIAO DỊCH</span>
                </a>
            </div>

            <div>
                <button id="account-button" class="btn btn-secondary mx-1">
                    <!-- js generator -->
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Search Section -->
        <section class="text-center mb-4">
            <h2 class="fw-bold text-success">KIỂM TRA SCAMMER</h2>

            <div class="search-bar">
                <input id="key-input" type="text" placeholder="Nhập SĐT, Email hoặc Số tài khoản để kiểm tra...">
                <button class="search-button" onclick="checkClick()">Kiểm tra</button>
            </div>
        </section>

        <!-- Table Section -->
        <section class="scam-list-table">
            <div class="container mt-5">
                <div class="row">
                    <div class="col-md-8">
                        <div class="card mb-4">
                            <div class="card-header">
                                <h2 class="card-title text-danger">Thông tin Scam</h2>
                            </div>
                            <div class="card-body scammer-body">
                                <div class="mb-2"><strong>Chủ TK:</strong> <span id="scammer-name"></span></div>
                                <div class="mb-2"><strong>STK:</strong> <span id="scammer-bank-account"></span></div>
                                <div class="mb-2"><strong>Ngân hàng:</strong> <span id="scammer-bank-name"></span></div>
                                <div class="mb-2"><strong>Số tiền chiếm đoạt:</strong> <span class="text-danger"><span
                                            id="scammer-money"></span></span></div>
                                <div class="mb-2"><strong>Hạng mục:</strong> <span id="scammer-type"></span></div>
                                <h5 class="mt-3">Ảnh Chụp Bằng Chứng:</h5>
                                <div class="mb-3 information-item_images" id="image-report">
                                </div>
                                <h5 class="mt-3">Nội dung tố cáo:</h5>
                                <p class="report-content" id="report-content"></p>
                                <div class="flex-md-row pt-4 hstack gap-15px justify-content-between">
                                    <div class="hstack gap-20px">
                                        <div class="fw-bold text-success">
                                            <i class="fas fa-thumbs-up"></i>
                                            Tán thành: 0
                                        </div>
                                        <div class="fw-bold text-danger ml-3">
                                            <i class="fas fa-thumbs-down"></i>
                                            Không tán thành: 0
                                        </div>
                                    </div>
                                    <!-- <div>
                                        <a href="" class="link-default text-secondary">
                                            <i class="fas fa-exclamation-triangle me-1"></i>Yêu cầu gỡ
                                        </a>
                                    </div> -->
                                </div>
                            </div>
                        </div>
                        <!-- <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">Bình luận</h2>
                            </div>
                            <div class="card-body">
                                <form>
                                    <div class="form-group row">
                                        <div class="col-3">
                                            <input type="radio" id="approve" name="approval" value="approve">
                                            <label for="approve">Tán thành</label><br>
                                        </div>
                                        <div class="col-3">
                                            <input type="radio" id="disapprove" name="approval" value="disapprove">
                                            <label for="disapprove">Không tán thành</label>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="comment" style="font-weight: 600;">Nội dung bình luận:</label>
                                        <textarea class="form-control" id="comment" rows="3"
                                            placeholder="Nhập nội dung bình luận"></textarea>
                                    </div>
                                    <div class="text-center">
                                        <button type="submit" class="btn btn-primary">Gửi bình luận</button>
                                    </div>
                                </form>
                            </div>
                        </div> -->
                    </div>
                    <div class="col-md-4">
                        <div class="card mb-4">
                            <div class="card-body">
                                <h3 class="card-title text-danger">Người tố cáo</h3>
                                <div class="mb-2"><strong>Họ và tên:</strong> <span id="reporter-name"></span></div>
                                <div class="mb-2"><strong>Zalo liên hệ:</strong> <span id="reporter-phone"></span></div>
                                <div class="mb-2"><strong>Điểm uy tín:</strong> <span id="reporter-reputation"></span>
                                </div>
                                <div class="mb-2"><strong>Lượt tố cáo:</strong> <span id="report-count"></span></div>
                                <div class="mb-2"><strong>Ngày tham gia:</strong> <span id="joinDate"></span></div>
                            </div>
                        </div>
                        <!-- <div class="card">
                            <div class="card-body">
                                <h3 class="card-title text-danger">Scammer gần đây</h3>
                                <ul class="list-unstyled">
                                    <li><i class="fas fa-user"></i> Bui Trung Kien - 70,000đ - 16-05-2024</li>
                                    <li><i class="fas fa-user"></i> NGUYEN DUC ANH - 1,400,000đ - 13-05-2024</li>
                                    <li><i class="fas fa-user"></i> Y DUY TRIEK - 100,000đ - 28-02-2024</li>
                                    <li><i class="fas fa-user"></i> Trịnh Duy Bảo Anh - 300,000đ - 14-01-2024</li>
                                    <li><i class="fas fa-user"></i> Nguyen Anh Tu - 40,000đ - 07-12-2023</li>
                                </ul>
                            </div>
                        </div> -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="text-center mt-5 py-3 bg-light">
    </footer>
    <script src="../assets/fancybox.umd.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="../assets/app.js"></script>
    <script>
        Fancybox.bind("[data-fancybox]", {
            // Your custom options
        });
        const urlParams = new URLSearchParams(window.location.search);
        const link = urlParams.get('link');
        if (link != null) {
            getDetailScammerData();
        }

        const id = urlParams.get('id');
        if (id != null) {
            getDetailScammerDataWithId();
        }

        function getDetailScammerData() {
            getDetailScammer(link).then((data) => {
                console.log(data);
                document.getElementById("scammer-name").innerText = data.name;
                document.getElementById("scammer-bank-account").innerText = data.bankAccount;
                document.getElementById("scammer-bank-name").innerText = data.bankName;
                document.getElementById("scammer-money").innerText = data.money;
                document.getElementById("scammer-type").innerText = data.type;
                document.getElementById("report-content").innerText = data.content;
                let div = document.getElementById("image-report");
                div.innerHTML = "";
                data.imageUrls.forEach((url) => {
                    let content = `
                    <a href="${url}" data-fancybox="scammer-images" aria-label="Xem chi tiết" class="initFancybox hstack information-item_image">
                    <div class="ratio ratio-1x1">
                        <img src="${url}" class="img-fluid" alt="">
                    </div>`;
                    div.innerHTML += content;
                });

                document.getElementById("reporter-name").innerText = data.reporterName;
                document.getElementById("reporter-phone").innerText = data.reporterPhone;
                document.getElementById("reporter-reputation").innerText = data.reporterReputation;
                document.getElementById("report-count").innerText = data.reportCount;
                document.getElementById("joinDate").innerText = data.joinDate;
            });
        }

        function getDetailScammerDataWithId() {
            getDetailScammerWithId(id).then((data) => {
                console.log(data);
                document.getElementById("scammer-name").innerText = data.name;
                document.getElementById("scammer-bank-account").innerText = data.bankAccount;
                document.getElementById("scammer-bank-name").innerText = data.bankName;
                document.getElementById("scammer-money").innerText = data.money;
                document.getElementById("scammer-type").innerText = data.type;
                document.getElementById("report-content").innerText = data.content;
                let div = document.getElementById("image-report");
                div.innerHTML = "";
                data.imageUrls.forEach((url) => {
                    let content = `
                    <a href="${url}" data-fancybox="scammer-images" aria-label="Xem chi tiết" class="initFancybox hstack information-item_image">
                    <div class="ratio ratio-1x1">
                        <img src="${url}" class="img-fluid" alt="">
                    </div>`;
                    div.innerHTML += content;
                });

                document.getElementById("reporter-name").innerText = data.reporterName;
                document.getElementById("reporter-phone").innerText = data.reporterPhone;
                document.getElementById("reporter-reputation").innerText = data.reporterReputation;
                document.getElementById("report-count").innerText = data.reportCount;
                document.getElementById("joinDate").innerText = data.joinDate;
            });
        }

        function checkClick() {
            var inputValue = document.getElementById("key-input").value;

            if (!inputValue) {
                alert("Vui lòng nhập thông tin!");
                return;
            }
            window.location.href = "/check?key=" + inputValue;
        };
    </script>
</body>

</html>